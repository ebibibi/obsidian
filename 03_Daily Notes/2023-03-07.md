- PowerShellのGet-AzAccessTokenはどんなときでも呼べるのかと思っていたけど、そういうわけでもない模様。複雑だ…。
- PowerShellを動かしているfunctions上でサービスプリンシパルとして認証させたときに全くAAD認証ができなくなってしまっている模様。そんなことある？何か仕様変わった？
- ちがった。サービスプリンシパルで認証した状態では普通にあれこれAAD認証が必要なコマンドレット実行できてるけど、その状態でスクリプトを実行したときに認証が必要な操作が動かなくなってる模様。
- スクリプトはサービスプリンシパルとして認証済みの状態でdot-sourcingで実行している。同じスコープで動作するはずで、これで挙動が異なるのは明らかにおかしいんじゃないかと思うんだけど…。何か私が根本的な勘違いをしているのかな？
- 手元のWindowsでは問題なく動く。Azure FunctionsのPowerShellだと挙動が異なる?しかも、以前はうまく動いていたものが変更していないはずなのに挙動が変化しているように見えている…。
- あれ、Get-AzAccessTokenだけ書いたスクリプトを実行したら、それならきちんと動いてる？何か根本的な勘違いがあるのかもしれない。もう少しきちんと確認しなければ…。
- あれれ、ログの出力の順番がおかしい。それが原因で勘違いしてるかも…。

日: [[2023-03-06]] | [[2023-03-08]]
週: [[2023-02-28]] | [[2023-03-14]]
月: [[2023-02-07]] | [[2023-04-07]]
年: [[2022-03-07]] | [[2024-03-07]]